# PollBox - å‰ç«¯å·²é›†æˆ

## âœ… å‰ç«¯ä»£ç å·²æ‹‰å–å®Œæˆ

**æ¥æº**: https://github.com/0xsongsu/fhew-vote-box.git  
**é›†æˆæ—¶é—´**: 2025å¹´10æœˆ29æ—¥  
**çŠ¶æ€**: âœ… å·²æ¸…ç†Gitä¿¡æ¯

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
02-PollBox/
â”œâ”€â”€ contracts/              # æ™ºèƒ½åˆçº¦
â”‚   â””â”€â”€ PollBox.sol        # ä¸»åˆçº¦ (202è¡Œ)
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â”‚   â””â”€â”€ PROJECT_SPEC.md    # é¡¹ç›®è§„æ ¼æ–‡æ¡£
â”œâ”€â”€ src/                    # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ components/        # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Hero.tsx
â”‚   â”‚   â”œâ”€â”€ Navbar.tsx
â”‚   â”‚   â”œâ”€â”€ PollCard.tsx
â”‚   â”‚   â””â”€â”€ ui/           # shadcn/uiç»„ä»¶åº“
â”‚   â”œâ”€â”€ pages/            # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ Index.tsx     # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ Polls.tsx     # æŠ•ç¥¨åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ CreatePoll.tsx # åˆ›å»ºæŠ•ç¥¨é¡µ
â”‚   â”‚   â”œâ”€â”€ PollDetail.tsx # æŠ•ç¥¨è¯¦æƒ…é¡µ
â”‚   â”‚   â””â”€â”€ NotFound.tsx  # 404é¡µé¢
â”‚   â”œâ”€â”€ config/           # é…ç½®
â”‚   â”‚   â””â”€â”€ wagmi.ts      # Web3é…ç½®
â”‚   â”œâ”€â”€ hooks/            # React Hooks
â”‚   â”‚   â”œâ”€â”€ use-mobile.tsx
â”‚   â”‚   â””â”€â”€ use-toast.ts
â”‚   â”œâ”€â”€ lib/              # å·¥å…·åº“
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â”œâ”€â”€ App.tsx           # ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ main.tsx          # å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ index.css         # å…¨å±€æ ·å¼
â”œâ”€â”€ public/               # é™æ€èµ„æº
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”œâ”€â”€ placeholder.svg
â”‚   â””â”€â”€ robots.txt
â”œâ”€â”€ package.json          # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ vite.config.ts        # Viteé…ç½®
â”œâ”€â”€ tailwind.config.ts    # Tailwindé…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScripté…ç½®
â””â”€â”€ README.md             # é¡¹ç›®è¯´æ˜
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æ¡†æ¶
- **React** 18.3.1
- **TypeScript** 5.8.3
- **Vite** 5.4.19

### UIç»„ä»¶åº“
- **shadcn/ui** - å®Œæ•´çš„UIç»„ä»¶é›†
- **Radix UI** - æ— éšœç¢ç»„ä»¶åŸè¯­
- **Tailwind CSS** 3.4.17
- **Lucide React** - å›¾æ ‡åº“

### Web3é›†æˆ
- **wagmi** 2.19.1 - React Hooks for Ethereum
- **viem** 2.38.5 - TypeScript Ethereumåº“
- **RainbowKit** 2.2.9 - é’±åŒ…è¿æ¥UI

### è·¯ç”±å’ŒçŠ¶æ€ç®¡ç†
- **React Router DOM** 6.30.1
- **TanStack Query** 5.90.5

### è¡¨å•å’ŒéªŒè¯
- **React Hook Form** 7.61.1
- **Zod** 3.25.76

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd /Users/songsu/Desktop/zama/fhe-projects-collection/02-PollBox
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
VITE_CONTRACT_ADDRESS=0x...  # PollBoxåˆçº¦åœ°å€
VITE_CHAIN_ID=11155111       # Sepoliaæµ‹è¯•ç½‘
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

æœåŠ¡å™¨å°†è¿è¡Œåœ¨ `http://localhost:5173`

### 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

### 5. é¢„è§ˆç”Ÿäº§æ„å»º

```bash
npm run preview
```

---

## ğŸ“„ é¡µé¢è¯´æ˜

### é¦–é¡µ (/)
- é¡¹ç›®ä»‹ç»
- Hero section
- å¿«é€Ÿå¯¼èˆª

### æŠ•ç¥¨åˆ—è¡¨ (/polls)
- å±•ç¤ºæ‰€æœ‰æŠ•ç¥¨
- ç­›é€‰åŠŸèƒ½
- æœç´¢åŠŸèƒ½

### åˆ›å»ºæŠ•ç¥¨ (/create-poll)
- åˆ›å»ºæ–°çš„äºŒå…ƒæŠ•ç¥¨
- è®¾ç½®æŠ•ç¥¨å…ƒæ•°æ®
- è®¾ç½®æŠ•ç¥¨æ—¶é—´
- IPFSå…ƒæ•°æ®å“ˆå¸Œ

### æŠ•ç¥¨è¯¦æƒ… (/poll/:id)
- æŸ¥çœ‹æŠ•ç¥¨è¯¦æƒ…
- Yes/NoæŠ•ç¥¨é€‰é¡¹
- å®æ—¶æŠ•ç¥¨ç»Ÿè®¡
- è§£å¯†å’ŒæŸ¥çœ‹ç»“æœ

---

## ğŸ¨ æ ¸å¿ƒç»„ä»¶

### Hero.tsx
- é¦–é¡µè‹±é›„åŒºåŸŸ
- é¡¹ç›®ä»‹ç»
- CTAæŒ‰é’®

### Navbar.tsx
- å¯¼èˆªæ 
- é’±åŒ…è¿æ¥
- è·¯ç”±å¯¼èˆª

### PollCard.tsx
- æŠ•ç¥¨å¡ç‰‡ç»„ä»¶
- æ˜¾ç¤ºæŠ•ç¥¨ä¿¡æ¯
- çŠ¶æ€å±•ç¤º

---

## ğŸ”Œ Web3é›†æˆ

### Wagmié…ç½®

æ–‡ä»¶: `src/config/wagmi.ts`

å·²é…ç½®ï¼š
- RainbowKité’±åŒ…è¿æ¥
- Sepoliaæµ‹è¯•ç½‘æ”¯æŒ
- åˆçº¦ABIå¯¼å…¥
- è‡ªåŠ¨é’±åŒ…æ£€æµ‹

### åˆçº¦äº¤äº’ç¤ºä¾‹

```typescript
import { useAccount, useReadContract, useWriteContract } from 'wagmi';

// è¿æ¥é’±åŒ…
const { address, isConnected } = useAccount();

// è¯»å–åˆçº¦ - è·å–æŠ•ç¥¨è¯¦æƒ…
const { data } = useReadContract({
  address: contractAddress,
  abi: PollBoxABI,
  functionName: 'getPollDetails',
  args: [pollId],
});

// å†™å…¥åˆçº¦ - åˆ›å»ºæŠ•ç¥¨
const { writeContract } = useWriteContract();
await writeContract({
  address: contractAddress,
  abi: PollBoxABI,
  functionName: 'createPoll',
  args: [metadataHash, durationSeconds],
});
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. åˆ›å»ºæŠ•ç¥¨
- è¡¨å•éªŒè¯
- å…ƒæ•°æ®å¤„ç†
- FHEåŠ å¯†é›†æˆï¼ˆå¾…å®ç°ï¼‰
- äº¤æ˜“æäº¤

### 2. äºŒå…ƒæŠ•ç¥¨ (Yes/No)
- é€‰æ‹©Yesæˆ–No
- åŠ å¯†æŠ•ç¥¨æ•°æ®
- æäº¤æŠ•ç¥¨äº¤æ˜“
- é˜²é‡å¤æŠ•ç¥¨

### 3. è§£å¯†ç»“æœ
- è¯·æ±‚è§£å¯†
- ç­‰å¾…Oracleå›è°ƒ
- å±•ç¤ºYes/Noç»“æœ
- æŠ•ç¥¨ç»Ÿè®¡å¯è§†åŒ–

### 4. å–æ¶ˆè§£å¯†
- è¶…æ—¶æ£€æµ‹
- åˆ›å»ºè€…å–æ¶ˆæƒé™
- é‡æ–°è¯·æ±‚è§£å¯†

---

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°é‡ |
|------|------|
| åˆçº¦æ–‡ä»¶ | 1 |
| å‰ç«¯ç»„ä»¶ | 51 |
| é¡µé¢æ–‡ä»¶ | 5 |
| UIç»„ä»¶ | 48 |

---

## ğŸ“¦ å¯ç”¨è„šæœ¬

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# å¼€å‘ç¯å¢ƒæ„å»º
npm run build:dev

# ä»£ç æ£€æŸ¥
npm run lint

# é¢„è§ˆæ„å»º
npm run preview
```

---

## ğŸ”§ é…ç½®æ–‡ä»¶

### Viteé…ç½® (vite.config.ts)
- React SWCæ’ä»¶
- è·¯å¾„åˆ«åé…ç½®
- å¼€å‘æœåŠ¡å™¨è®¾ç½®

### Tailwindé…ç½® (tailwind.config.ts)
- ä¸»é¢˜å®šåˆ¶
- é¢œè‰²æ–¹æ¡ˆ
- åŠ¨ç”»é…ç½®
- å“åº”å¼æ–­ç‚¹

### TypeScripté…ç½® (tsconfig.json)
- ä¸¥æ ¼æ¨¡å¼
- è·¯å¾„æ˜ å°„
- ç¼–è¯‘é€‰é¡¹

---

## ğŸ¨ æ ·å¼ç³»ç»Ÿ

### Tailwind CSS
- å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶
- è‡ªå®šä¹‰ä¸»é¢˜
- æš—è‰²æ¨¡å¼æ”¯æŒ
- å“åº”å¼è®¾è®¡

### CSSå˜é‡
æ–‡ä»¶: `src/index.css`

å·²å®šä¹‰ï¼š
- é¢œè‰²ç³»ç»Ÿ
- å­—ä½“å¤§å°
- é—´è·
- åœ†è§’
- é˜´å½±

---

## ğŸ” PollBoxç‰¹æ€§

### äºŒå…ƒæŠ•ç¥¨
- Yes/Noé€‰æ‹©
- åŠ å¯†å¸ƒå°”å€¼å­˜å‚¨
- ä½¿ç”¨ `ebool` FHEç±»å‹
- æ¡ä»¶åŒæ€è¿ç®—

### è¶…æ—¶ä¿æŠ¤
- `MAX_PENDING_DURATION = 10 minutes`
- åˆ›å»ºè€…å¯å–æ¶ˆå¡ä½çš„è§£å¯†
- é˜²æ­¢Oracleå¤±è´¥å¯¼è‡´çš„å¡æ­»

### å…ƒæ•°æ®ç®¡ç†
- IPFSå“ˆå¸Œå­˜å‚¨
- é“¾ä¸‹å…ƒæ•°æ®
- Gasä¼˜åŒ–

---

## ğŸ”„ å·¥ä½œæµç¨‹

### åˆ›å»ºæŠ•ç¥¨æµç¨‹
1. å¡«å†™æŠ•ç¥¨ä¿¡æ¯
2. ç”ŸæˆIPFSå“ˆå¸Œï¼ˆæˆ–ä½¿ç”¨bytes32å“ˆå¸Œï¼‰
3. è®¾ç½®æŠ•ç¥¨æ—¶é•¿
4. è°ƒç”¨ `createPoll(metadataHash, durationSeconds)`

### æŠ•ç¥¨æµç¨‹
1. é€‰æ‹© Yes æˆ– No
2. å‰ç«¯åŠ å¯†å¸ƒå°”å€¼
3. ç”Ÿæˆé›¶çŸ¥è¯†è¯æ˜
4. è°ƒç”¨ `vote(pollId, encChoice, inputProof)`

### è§£å¯†æµç¨‹
1. æŠ•ç¥¨ç»“æŸåè¯·æ±‚è§£å¯†
2. è°ƒç”¨ `requestReveal(pollId)`
3. ç­‰å¾…Oracleå›è°ƒ
4. æŸ¥çœ‹Yes/Noç»“æœ

### å–æ¶ˆè§£å¯†æµç¨‹
1. æ£€æµ‹è¶…æ—¶ï¼ˆ10åˆ†é’Ÿï¼‰
2. åˆ›å»ºè€…è°ƒç”¨ `cancelReveal(pollId)`
3. é‡ç½®è§£å¯†çŠ¶æ€
4. å¯é‡æ–°è¯·æ±‚è§£å¯†

---

## ğŸ“š ç›¸å…³èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [React](https://react.dev/)
- [Vite](https://vitejs.dev/)
- [Tailwind CSS](https://tailwindcss.com/)
- [shadcn/ui](https://ui.shadcn.com/)
- [wagmi](https://wagmi.sh/)
- [RainbowKit](https://www.rainbowkit.com/)

### é¡¹ç›®æ–‡æ¡£
- `docs/PROJECT_SPEC.md` - å®Œæ•´é¡¹ç›®è§„æ ¼
- `contracts/PollBox.sol` - æ™ºèƒ½åˆçº¦
- `README.md` - é¡¹ç›®æ¦‚è¿°

---

## ğŸ› å¸¸è§é—®é¢˜

### 1. é’±åŒ…è¿æ¥å¤±è´¥
- ç¡®ä¿å®‰è£…äº†MetaMaskæˆ–å…¶ä»–Web3é’±åŒ…
- åˆ‡æ¢åˆ°Sepoliaæµ‹è¯•ç½‘
- æ£€æŸ¥ç½‘ç»œé…ç½®

### 2. åˆçº¦è°ƒç”¨å¤±è´¥
- æ£€æŸ¥åˆçº¦åœ°å€æ˜¯å¦æ­£ç¡®
- ç¡®ä¿é’±åŒ…æœ‰è¶³å¤Ÿçš„æµ‹è¯•å¸
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

### 3. è§£å¯†è¶…æ—¶
- ç­‰å¾…10åˆ†é’Ÿåå¯ä»¥å–æ¶ˆ
- åˆ›å»ºè€…å¯è°ƒç”¨ `cancelReveal`
- é‡æ–°è¯·æ±‚è§£å¯†

### 4. FHEåŠ å¯†é—®é¢˜
- ç¡®ä¿æ­£ç¡®å¯¼å…¥FHE SDK
- æ£€æŸ¥åŠ å¯†å‚æ•°
- å‚è€ƒé¡¹ç›®æ–‡æ¡£

---

## ğŸ“ å¾…åŠäº‹é¡¹

- [ ] é›†æˆFHE SDK (@zama-fhe/relayer-sdk)
- [ ] å®ç°eboolæŠ•ç¥¨åŠ å¯†é€»è¾‘
- [ ] æ·»åŠ IPFSé›†æˆ
- [ ] æ·»åŠ è§£å¯†ç»“æœå¯è§†åŒ–
- [ ] ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ
- [ ] æ·»åŠ åŠ è½½çŠ¶æ€åŠ¨ç”»
- [ ] å®ç°é”™è¯¯è¾¹ç•Œ
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] ä¼˜åŒ–SEO

---

## âœ… å·²å®Œæˆ

- [x] å‰ç«¯ä»£ç æ‹‰å–
- [x] Gitä¿¡æ¯æ¸…ç†
- [x] é¡¹ç›®ç»“æ„æ•´ç†
- [x] UIç»„ä»¶é›†æˆ
- [x] Web3åŸºç¡€é…ç½®
- [x] è·¯ç”±é…ç½®
- [x] å“åº”å¼è®¾è®¡
- [x] äºŒå…ƒæŠ•ç¥¨UI

---

## ğŸ”„ ä¸ChainVoteçš„åŒºåˆ«

| ç‰¹æ€§ | ChainVote | PollBox |
|------|-----------|---------|
| æŠ•ç¥¨ç±»å‹ | å¤šé€‰é¡¹ | äºŒå…ƒ(Yes/No) |
| FHEç±»å‹ | euint64 | euint128 + ebool |
| å…ƒæ•°æ® | é“¾ä¸Šå­˜å‚¨ | IPFSå“ˆå¸Œ |
| è§£å¯†ä¿æŠ¤ | åŸºç¡€ | è¶…æ—¶å–æ¶ˆæœºåˆ¶ |
| é¡µé¢æ•°é‡ | 5 | 5 |
| ç»„ä»¶æ•°é‡ | 51 | 51 |

---

**å‰ç«¯å·²å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥å¼€å§‹å¼€å‘FHEåŠŸèƒ½é›†æˆï¼** ğŸš€

